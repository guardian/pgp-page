{% extends "base.html" %}
{% block content %}
<main role='main' class='body'>
    <section class="row">
        <div class="intro col s10 offset-s2">
            <div class='intro__over-heading'>The Guardian PGP</div>
            <div class='intro__heading'>
                <div class='intro__heading-text'>
                    Privately contact our journalists
                </div>
            </div>
        </div>
    </section>
    <section class="row">
        <div class="section-content col s8 offset-s2">
            <p>
                When corresponding with our journalists there are times where anonymity is not a priority, but the
                aim is to keep the conversation private. In such situations it may be appropriate to use email, but with
                an additional layer of security.
            </p>
            <p>
                Encrypting the contents of an email using public key cryptographic methods is a good way to avoid
                compromising the content.
            </p>
            <p>

                The Guardian uses a third party cloud email solution. Mail and document encryption can also help
                stop a third party from reading the contents of a conversation.
            </p>
            <p>

                This page contains public keys of Guardian staff. To send an encrypted message to a journalist you
                will need to create your own keys and then encrypt the message using both your keys and the journalistâ€™s
                public key.
            </p>
            <p>
                There are many different implementations of public key cryptography. At the Guardian we have opted for
                an open source implementation of the OpenPGP standard. As with any public key cryptography
                implementation, there may be software incompatibilities. We will do our best to resolve discrepancies,
                but some issues may be beyond the capabilities of our technological implementation. The Guardian does
                not endorse any particular PGP integration or application.
            </p>

        </div>
    </section>
    <section class='filter row require-js'>
        <div class="col s10 offset-s2">
            <label for='filter'>
                <input id='filter' name='filter' type='text' class='filter__input browser-default' onkeyup='filterNames()'
                    spellcheck="false" placeholder='Filter names...' />
            </label>
        </div>
    </section>
    <section class="row">
        <div class="section-content col s10 m6 offset-s2 offset-m2">
            {% for group in groups %}
            <ol class="collection with-header js-group">
                <li class="collection-header"><h4>{{ group.heading }}</h4></li>
                {% for entry in group.entries %}
                    <li class="collection-item js-entry">
                        <div>
                            <span class="js-name">{{ entry.name }}</span>
                            <div class="secondary-content">
                                <a class="entry__link" href='{{ entry.public_key }}'>Public Key</a>
                                <a class="entry__link" href='{{ entry.fingerprint }}'>Fingerprint</a>
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ol>
            {% endfor %}
        </div>
    </section>

    <section class="row section-terms">
        <div class="container">
            <div class="row">
                <div class="col s12">
                        <h5>Terms and conditions</h5>
                        <p>Use of The Guardian PGP public keys for encrypting email contents is at the user's own risk.</p>
                        <p>Guardian PGP Public keys may be found on third party key servers. We cannot vouch for those third parties key stores but can vouch for the validity of keys on this site</p>
                </div>
            </div>
        </div>
    </section>

    <script>
        function filterNames() {
            var filter = document.getElementById('filter')
            if (filter) {
                var text = filter.value.toLowerCase();
                var names = document.getElementsByClassName('js-name');

                for (var i = 0; i < names.length; i++) {
                    var elem = names[i];

                    if (elem.innerText.toLowerCase().indexOf(text) === -1) {
                        elem.closest('.js-entry').setAttribute('data-hidden', true);
                    } else {
                        elem.closest('.js-entry').removeAttribute('data-hidden');
                    }
                }

                var groups = document.getElementsByClassName('js-group');
                for (var i = 0; i < groups.length; i++) {
                    var group = groups[i];
                    if (group.querySelectorAll('.js-entry:not([data-hidden])').length === 0) {
                        group.setAttribute('data-hidden', true);
                    } else {
                        group.removeAttribute('data-hidden');
                    }
                }
            }
        }
    </script>
</main>
{% endblock %}